<div class="px-4 py-2 color d-none d-lg-flex justify-content-between align-items-center text-white">
    <div class="d-flex gap-5 contact">
        <div class="d-flex gap-2 align-items-center flex-row-reverse">
            <i class="fa-regular fa-phone-flip"></i>
            <a href="https://wa.me/+201110037311?text=مرحبا،%20أنا%20مهتم%20بخدماتكم.">+20 11 10037311</a>
        </div>
    </div>
    <ul class="d-flex gap-2 socail">
        <li><a href="#"><i class="fa-brands fa-x-twitter"></i></a></li>
        <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
        <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
        <li><a href="#"><i class="fa-brands fa-youtube"></i></a></li>
    </ul>
</div>

<nav class="navbar px-4">
    <a [routerLink]="'/Home'" [routerLinkActive]="'active'" [routerLinkActiveOptions]="{ exact: true }" class="logo">
        <img loading="lazy" fetchpriority="high" src="images/logo.webp" width="50" height="50" alt="" />
    </a>

    <div class="nav-links desktop-menu">
        <a [routerLink]="'/About'" [routerLinkActive]="'active'" [routerLinkActiveOptions]="{ exact: true }" class="link"><span>عنا</span></a>
        <a href="#" class="link"><span>خدمتنا</span></a>
        <a href="#" class="link"><span>اسعارنا</span></a>
        <div class="dropdown-container" (mouseenter)="showDropdown = true" (mouseleave)="showDropdown = false">
            <a class="link" [class.active]="showDropdown"> الصفحات </a>
        </div>
    </div>

    <div class="nav-icons">
        <div class="search-box desktop-search">
            <input type="text" placeholder="بحث" (click)="toggleSearchPopup()" />
        </div>
        <div class="Quota-link d-none d-lg-flex">
            <a href="https://wa.me/+201110037311?text=مرحبا،%20أنا%20مهتم%20بخدماتكم.">تواصل معنا <i class="fa-solid fa-arrow-left arrow"></i></a>
        </div>
    </div>

    <button class="navbar-toggler hamburger d-lg-none" (click)="toggleMobileMenu()" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
    </button>
</nav>

<div class="mobile-menu-overlay" [class.open]="showMobileMenu">
    <div class="logo-mobile">
        <a [routerLink]="'/Home'" class="logo">
            <img loading="lazy" fetchpriority="high" src="images/logo.webp" width="50" height="50" alt="">
        </a>
        <button class="close-btn" (click)="closeMobileMenu()">×</button>
    </div>

    <div class="mobile-nav-links">
        <a [routerLink]="'/About'" class="mobile-link"><span>عنا</span></a>
        <a href="#" class="mobile-link"><span>خدمتنا</span></a>
        <a href="#" class="mobile-link"><span>اسعارنا</span></a>
        <div class="mobile-dropdown-container">
            <div class="mobile-dropdown-header" (click)="toggleMobileDropdown()">
                <span class="mobile-link">صفحتنا</span>
                <span class="plus-icon" [class.rotated]="showMobileDropdown">+</span>
            </div>
        </div>
        <div class="Quota-link">
            <a href="https://wa.me/+201110037311?text=مرحبا،%20أنا%20مهتم%20بخدماتكم.">تواصل معنا</a>
        </div>
    </div>
</div>

<div class="search-overlay" [@fadeAndScale]="isSearchPopupOpen ? 'open' : 'closed'">
    <div class="search-popup-content">
        <div class="search-popup-header">
            <input #searchInput type="text" placeholder="ابحث..." [(ngModel)]="searchTerm" (input)="filterResults()" (keydown.enter)="handleSearch()" (keydown.arrowdown)="navigateResults($event, 1)" (keydown.arrowup)="navigateResults($event, -1)" />
            <button class="close-popup" (click)="toggleSearchPopup()"><i class="fas fa-times"></i></button>
        </div>

        <div class="search-popup-results">
            <div *ngIf="searchTerm.length > 0" class="search-results-list">
                <a *ngFor="let result of filteredResults; let i = index" [routerLink]="result.url" (click)="selectResult()" [class.active]="i === selectedIndex">
                    {{ result.name }}
                </a>
                <div class="no-results" *ngIf="!filteredResults.length">
                    No results found
                </div>
            </div>
            <div *ngIf="searchTerm.length === 0" class="predefined-list">
                <h4>Popular Searches</h4>
                <a *ngFor="let keyword of predefinedKeywords" [routerLink]="keyword.url" (click)="selectResult()">
                    {{ keyword.name }}
                </a>
            </div>
        </div>
    </div>
</div>